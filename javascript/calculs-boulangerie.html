<!DOCTYPE html>
<!--
license : GPL 3.0
copyright : Franck Barbenoire (franck@barbenoi.re)
-->
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>Calcul de boulangerie</title>
    <script>
      <!--
        "use strict";

        function clear_results() {
          var x = document.getElementsByClassName("sortie");
          var i;
          for (i = 0; i < x.length; i++) {
            x[i].value = "-";
          }
        }

        function is_valid_number(n, percent) {
          if(!isNaN(n)) {
            var v = parseFloat(n)
            if (v < 0) {
              alert("Nombre négatif interdit");
              clear_results();
              return false;
            }
            if (percent && v > 100) {
              alert("Pourcentage supérieur à 100");
              clear_results();
              return false;
            }
            return true;
          } else {
            alert("Format de nombre invalide");
            clear_results();
            return false;
          }
        }

        function check_input(event, func, percent) {
          if(is_valid_number(event.target.value, percent)) {
            func();
          } else {
            clear_results();
          }
        }

        function calcul_pate_imposee() {
          var ptp = document.form_pate_imposee.ptp.value;
          ptp = ptp * 1.0;
          var thp = document.form_pate_imposee.thp.value;
          thp = thp / 100;
          var thl = document.form_pate_imposee.thl.value;
          thl = thl / 100;
          var tlf = document.form_pate_imposee.tlf.value;
          tlf = tlf / 100;
          var pfl = (ptp * tlf) / (1 + tlf) / (1 + thp);
          var pf = pfl / tlf;
          var pe = (((1 / tlf) + 1) * thp - thl) * pfl;
          var pl = (1 + thl) * pfl;
          var ps = (pf + pfl) * 0.02;
          if (pe < 0) {
            clear_results();
          } else {
            document.form_pate_imposee.pf.value = Math.round(pf*10)/10;
            document.form_pate_imposee.pe.value = Math.round(pe*10)/10;
            document.form_pate_imposee.pl.value = Math.round(pl*10)/10;
            document.form_pate_imposee.ps.value = Math.round(ps*10)/10;
          }
        }

        function calcul_levain_impose() {
          var pl = document.form_levain_impose.pl.value;
          pl = pl * 1.0;
          var thp = document.form_levain_impose.thp.value;
          thp = thp / 100;
          var thl = document.form_levain_impose.thl.value;
          thl = thl / 100;
          var tlf = document.form_levain_impose.tlf.value;
          tlf = tlf / 100;
          var pfl =  pl / (1 + thl);
          var pf = pfl / tlf;
          var pe = (((1 / tlf) + 1) * thp - thl) * pfl;
          var ptp = pf + pe + pl;
          var ps = (pf + pfl) * 0.02;
          if (pe < 0) {
            clear_results();
          } else {
            document.form_levain_impose.pf.value = Math.round(pf*10)/10;
            document.form_levain_impose.pe.value = Math.round(pe*10)/10;
            document.form_levain_impose.ptp.value = Math.round(ptp*10)/10;
            document.form_levain_impose.ps.value = Math.round(ps*10)/10;
          }
        }

        function calcul_pate_equivalente() {
          var ptf = document.form_pate_equivalente.ptf.value;
          ptf = ptf * 1.0;
          var pte = document.form_pate_equivalente.pte.value;
          pte = pte * 1.0;
          var thl = document.form_pate_equivalente.thl.value;
          thl = thl / 100;
          var tlf = document.form_pate_equivalente.tlf.value;
          tlf = tlf / 100;
          var pf = ptf / (1 + tlf / (1 + 1 / thl));
          var pe = pte - ptf * tlf / (1 + (1 + tlf) * thl);
          var pl = pf * tlf;
          var ps = ptf * 0.02;
          if (pe < 0) {
            clear_results();
          } else {
            document.form_pate_equivalente.pf.value = Math.round(pf*10)/10;
            document.form_pate_equivalente.pe.value = Math.round(pe*10)/10;
            document.form_pate_equivalente.pl.value = Math.round(pl*10)/10;
            document.form_pate_equivalente.ps.value = Math.round(ps*10)/10;
          }
        }
      -->
    </script>
    <style type="text/css">
      /* styles pour les tabs : https://codepen.io/CesarGabriel/pen/nLhAa?editors=1000 */
      * {
        font-family: Arial, sans;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
      }

      #container {
        margin: 0 auto;
        width: 50%;  /* Ancho del contenedor */
      }

      #container > input {
        height: 2.5em;
        visibility: hidden;
      }

      #container > label {
        background: #f9f9f9;
        border-radius: .25em .25em 0 0;
        color: #888;
        cursor: pointer;
        display: block;
        float: left;
        font-size: 1em;
        height: 2.5em;
        line-height: 2.5em;
        margin-right: .25em;
        padding: 0 1.5em;
        text-align: center;
      }

      #container > input:hover + label {
        background: #ddd;
        color: #666;
      }

      #container > input:checked + label {
        background: #f1f1f1;
        color: #444;
        position: relative;
        z-index: 6;
      }

      #content {
        background: #f1f1f1;
        border-radius: 0 .25em .25em .25em;
        min-height: 20em;
        position: relative;
        width: 100%;
        z-index: 5;
      }

      #content > div {
        opacity: 0;
        padding: 1.5em;
        position: absolute;
        z-index: -100;
      }

      #container input#tab-1:checked ~ #content #content-1,
      #container input#tab-2:checked ~ #content #content-2,
      #container input#tab-3:checked ~ #content #content-3 {
        opacity: 1;
        z-index: 100;
      }

      input.visible {
        visibility: visible !important;
      }

      /* autres styles : http://callmenick.com/post/various-css-input-text-styles */
      .entree, .sortie {
        padding: 5px;
        margin: 5px;
        border: solid 1px #dcdcdc;
        width: 6em;
      }

      .entree {
        transition: box-shadow 0.3s, border 0.3s;
      }

      .entree:focus, .entree.focus {
        border: solid 1px #707070;
        box-shadow: 0 0 5px 1px #969696;
      }

      .sortie {
        background-color: #d8d8d8;
      }
    </style>
  </head>

  <body onload="calcul_pate_imposee();">
    <div id="container">

      <!-- 1er tab -->
      <input id="tab-1" type="radio" class="tab" name="tab-group" checked="checked" onchange="calcul_pate_imposee();" />
      <label for="tab-1">Poids de la pâte imposé</label>
      <!-- 2eme tab -->
      <input id="tab-2" type="radio" class="tab" name="tab-group" onchange="calcul_levain_impose();" />
      <label for="tab-2">Poids du levain imposé</label>
      <!-- 3eme tab -->
      <input id="tab-3" type="radio" class="tab" name="tab-group" onchange="calcul_pate_equivalente();" />
      <label for="tab-3">Pâte équivalente</label>

      <div id="content">
        <!-- 1er tab -->
        <div id="content-1">
          <p>Ce formulaire permet de calculer le poids de l'eau et de la farine
          pour obtenir une quantité de pâte dont le poids est connu à l'avance.</p>
          <p>Plus d'informations sur les formules appliquées sur
          <a href="http://www.franck-barbenoire.fr/posts/2014/07/03/calcul-ingredients/">cette page</a>.</p>
          <form name="form_pate_imposee">
            <table cellspacing="30">
              <tr>
                <td><b>Entrées</b></td>
                <td><b>Résultats</b></td>
              </tr>
              <tr>
                <td>
                  <table>
                    <tr>
                      <td>Poids de la pâte</td>
                      <td><input type="text" class="entree" name="ptp" oninput="check_input(event, calcul_pate_imposee, false);" value="1000"></td>
                    </tr>
                    <tr>
                      <td>Taux d'hydratation de la pâte <span style="font-size: smaller;">(en %)</span></td>
                      <td><input type="text" class="entree" name="thp" oninput="check_input(event, calcul_pate_imposee, true);" value="60"></td>
                    </tr>
                    <tr>
                      <td>Taux d'hydratation du levain <span style="font-size: smaller;">(en %)</span></td>
                      <td><input type="text" class="entree" name="thl" oninput="check_input(event, calcul_pate_imposee, true);" value="100"></td>
                    </tr>
                    <tr>
                      <td>Taux levain farine <span style="font-size: smaller;">(en %)</span></td>
                      <td><input type="text" class="entree" name="tlf" oninput="check_input(event, calcul_pate_imposee, true);" value="20"></td>
                    </tr>
                  </table>
                </td>
                <td>
                  <table>
                    <tr>
                      <td>Poids de la farine</td>
                      <td><input type="text" class="sortie" name="pf" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids de l'eau</td>
                      <td><input type="text" class="sortie" name="pe" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids du levain</td>
                      <td><input type="text" class="sortie" name="pl" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids du sel <span style="font-size: smaller;">(2% du poids de toute la farine)</span></td>
                      <td><input type="text" class="sortie" name="ps" readonly /></td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
          </form>
        </div>

        <!-- 2eme tab -->
        <div id="content-2">
          <p>Ce formulaire permet de calculer le poids de l'eau et de la farine
          sachant que l'on dispose d'une quantité de levain dont le poids est
          connu à l'avance.</p>
          <p>Plus d'informations sur les formules appliquées sur
          <a href="http://www.franck-barbenoire.fr/posts/2014/07/03/calcul-ingredients/">cette page</a>.</p>
          <form name="form_levain_impose">
            <table cellspacing="30">
              <tr>
                <td><b>Entrées</b></td>
                <td><b>Résultats</b></td>
              </tr>
              <tr>
                <td>
                  <table>
                    <tr>
                      <td>Poids du levain</td>
                      <td><input type="text" class="entree" name="pl" oninput="check_input(event, calcul_levain_impose, false);" value="150"></td>
                    </tr>
                    <tr>
                      <td>Taux d'hydratation de la pâte <span style="font-size: smaller;">(en %)</span></td>
                      <td><input type="text" class="entree" name="thp" oninput="check_input(event, calcul_levain_impose, true);" value="60"></td>
                    </tr>
                    <tr>
                      <td>Taux d'hydratation du levain <span style="font-size: smaller;">(en %)</span></td>
                      <td><input type="text" class="entree" name="thl" oninput="check_input(event, calcul_levain_impose, true);" value="100"></td>
                    </tr>
                    <tr>
                      <td>Taux levain farine <span style="font-size: smaller;">(en %)</span></td>
                      <td><input type="text" class="entree" name="tlf" oninput="check_input(event, calcul_levain_impose, true);" value="30"></td>
                    </tr>
                  </table>
                </td>
                <td>
                  <table>
                    <tr>
                      <td>Poids de la farine</td>
                      <td><input type="text" class="sortie" name="pf" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids de l'eau</td>
                      <td><input type="text" class="sortie" name="pe" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids de la pâte</td>
                      <td><input type="text" class="sortie" name="ptp" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids du sel <span style="font-size: smaller;">(2% du poids de toute la farine)</span></td>
                      <td><input type="text" class="sortie" name="ps" readonly /></td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
          </form>
        </div>

        <!-- 3eme tab -->
        <div id="content-3">
          <p>Ce formulaire permet de convertir une recette de pain à la levure
          en une recette de pain au levain.</p>
          <br>
          <p>Plus d'informations sur les formules appliquées sur
          <a href="http://www.franck-barbenoire.fr/posts/2014/07/03/calcul-ingredients/">cette page</a>.</p>
          <form name="form_pate_equivalente">
            <table cellspacing="30">
              <tr>
                <td><b>Entrées</b></td>
                <td><b>Résultats</b></td>
              </tr>
              <tr>
                <td>
                  <table>
                    <tr>
                      <td>Poids de la farine</td>
                      <td><input type="text" class="entree" name="ptf" oninput="check_input(event, calcul_pate_equivalente, false);" value="500"></td>
                    </tr>
                    <tr>
                      <td>Poids de l'eau</td>
                      <td><input type="text" class="entree" name="pte" oninput="check_input(event, calcul_pate_equivalente, false);" value="300"></td>
                    </tr>
                    <tr>
                      <td>Taux d'hydratation du levain <span style="font-size: smaller;">(en %)</span></td>
                      <td><input type="text" class="entree" name="thl" oninput="check_input(event, calcul_pate_equivalente, true);" value="70"></td>
                    </tr>
                    <tr>
                      <td>Taux levain farine <span style="font-size: smaller;">(en %)</span></td>
                      <td><input type="text" class="entree" name="tlf" oninput="check_input(event, calcul_pate_equivalente, true);" value="40"></td>
                    </tr>
                  </table>
                </td>
                <td>
                  <table>
                    <tr>
                      <td>Poids de la farine</td>
                      <td><input type="text" class="sortie" name="pf" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids de l'eau</td>
                      <td><input type="text" class="sortie" name="pe" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids du levain</td>
                      <td><input type="text" class="sortie" name="pl" readonly /></td>
                    </tr>
                    <tr>
                      <td>Poids du sel <span style="font-size: smaller;">(2% du poids de toute la farine)</span></td>
                      <td><input type="text" class="sortie" name="ps" readonly /></td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
          </form>
        </div>
      </div>

    </div>
  </body>
</html>
